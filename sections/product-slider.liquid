<section class="custom-product-slider-section">
    {%- if section.settings.title != blank -%}
        <h2 class="title product-slider-title scroll-trigger animate--slide-in">
            {{ section.settings.title }}
        </h2>
    {%- endif -%}

    {%- if section.settings.collection != blank -%}
        {% assign collection = collections[section.settings.collection] %}
        {%- if collection.products.size > 0 -%}
            <div class="product-slider">
                {%- for product in collection.products -%}
                    <div class="product-slider-item">
                        <a href="{{ product.url }}">
                            <img src="{{ product.featured_image | img_url: 'master' }}" alt="{{ product.title }}">
                            <!--<h3>{{ product.title }}</h3>
                            <span>{{ product.price | money }}</span>-->
                        </a>
                    </div>
                {%- endfor -%}
            </div>
        {%- else -%}
            <p>No products found in this collection.</p>
        {%- endif -%}
    {%- endif -%}
</section>

{% schema %}
{
  "name": "Product Slider",
  "settings": [
    {
      "type": "inline_richtext",
      "id": "title",
      "default": "t:sections.featured-collection.settings.title.default",
      "label": "t:sections.featured-collection.settings.title.label"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "t:sections.featured-collection.settings.collection.label"
    }
  ],
  "presets": [
    {
      "name": "Product Slider"
    }
  ]
}
{% endschema %}

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Slick Slider JS -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel/slick/slick.min.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
    $('.product-slider').slick({
      dots: false,
      infinite: true,
      rows: 1,
      slidesToShow: 4,
      slidesToScroll: 1,
      nextArrow: '<button type="button" class="slick-next"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><line x1="0.609916" y1="12.5804" x2="11.9236" y2="1.26667" stroke="#53575A" stroke-width="1.2"/><line x1="1.08149" y1="12.2032" x2="12.3952" y2="23.5169" stroke="#53575A" stroke-width="1.2"/></svg></button>',
      prevArrow: '<button type="button" class="slick-prev"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><line x1="22.6743" y1="11.3608" x2="11.3606" y2="22.6745" stroke="#53575A" stroke-width="1.2"/><line x1="22.2027" y1="11.738" x2="10.889" y2="0.424275" stroke="#53575A" stroke-width="1.2"/></svg></button>',
      responsive: [
        {
          breakpoint: 1024,
          settings: {
            rows: 1,
            slidesToShow: 3,
            slidesToScroll: 1,
            infinite: true,
            dots: false
          }
        },
        {
          breakpoint: 600,
          settings: {
            rows: 1,
            slidesToShow: 2,
            slidesToScroll: 1
          }
        },
        {
          breakpoint: 480,
          settings: {
            rows: 2,
            slidesToShow: 4,
            slidesToScroll: 4
          }
        }
      ]
    });
  });
</script>
<style>
    .custom-product-slider-section {
        width: 100%;
        padding: 0;
    }
    
    .product-slider-wrapper {
        position: relative;
        width: 100%;
        overflow: hidden;
    }
    
    .product-slider {
        width: 100%;
        display: flex;
        align-items: stretch;
    }
    
    .product-slider-item {
        padding: 0 4px; /* Half of the gap to both sides */
        box-sizing: border-box;
    }
    
    .slick-list {
        margin: 0 -4px; /* Negative margin to compensate the padding */
    }
    
    .custom-product-slider-section .slick-prev, .custom-product-slider-section .slick-next {
        background: none;
        border: none;
        cursor: pointer;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 1;
    }
    
    .custom-product-slider-section .slick-prev {
        right: 10px;
    }
    
    .custom-product-slider-section .slick-next {
        left: 10px;
    }

    .product-slider-item img {
        width: 100%;
        height: auto;
    }
    
   
    
</style>